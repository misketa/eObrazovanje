{"ast":null,"code":"import { HttpEventType } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./../../services/uploads/upload.service\";\nimport * as i2 from \"@angular/common\";\n\nconst _c0 = function (a0) {\n  return {\n    width: a0\n  };\n};\n\nfunction DokumentComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 12);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(3, _c0, ctx_r0.progress + \"%\"));\n    i0.ɵɵattribute(\"aria-valuenow\", ctx_r0.progress);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.progress, \"% \");\n  }\n}\n\nfunction DokumentComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.message, \"\\n\");\n  }\n}\n\nfunction DokumentComponent_ul_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 14)(1, \"li\", 15)(2, \"a\", 16);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const file_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"href\", file_r3.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(file_r3.name);\n  }\n}\n\nexport class DokumentComponent {\n  constructor(fileuploadingService) {\n    this.fileuploadingService = fileuploadingService;\n    this.filenames = [];\n    this.fileStatus = {\n      status: '',\n      requestType: '',\n      percent: 0\n    };\n  }\n\n  ngOnInit() {\n    this.fileInfos = this.fileuploadingService.getFiles();\n  }\n\n  selectFile(event) {\n    this.selectedFiles = event.target.files;\n  }\n\n  onUploadFiles(files) {\n    const formData = new FormData();\n\n    for (const file of files) {\n      formData.append('files', file, file.name);\n    }\n\n    this.fileuploadingService.upload(formData).subscribe(event => {\n      console.log(event);\n      this.resportProgress(event);\n    }, error => {\n      console.log(error);\n    });\n  }\n\n  resportProgress(httpEvent) {\n    switch (httpEvent.type) {\n      case HttpEventType.UploadProgress:\n        this.updateStatus(httpEvent.loaded, httpEvent.total, 'Uploading... ');\n        break;\n\n      case HttpEventType.DownloadProgress:\n        this.updateStatus(httpEvent.loaded, httpEvent.total, 'Downloading... ');\n        break;\n\n      case HttpEventType.ResponseHeader:\n        console.log('Header returned', httpEvent);\n        break;\n\n      case HttpEventType.Response:\n        if (httpEvent.body instanceof Array) {\n          this.fileuploadingService.status = 'done';\n\n          for (const filename of httpEvent.body) {\n            this.filenames.unshift(filename);\n          }\n        } else {\n          saveAs(new File([httpEvent.body], httpEvent.headers.get('File-Name'), {\n            type: `${httpEvent.headers.get('Content-Type')};charset=utf-8`\n          })); // saveAs(new Blob([httpEvent.body!],\n          //   { type: `${httpEvent.headers.get('Content-Type')};charset=utf-8`}),\n          //    httpEvent.headers.get('File-Name'));\n        }\n\n        this.fileStatus.status = 'done';\n        break;\n\n      default:\n        console.log(httpEvent);\n        break;\n    }\n  }\n\n}\n\nDokumentComponent.ɵfac = function DokumentComponent_Factory(t) {\n  return new (t || DokumentComponent)(i0.ɵɵdirectiveInject(i1.UploadService));\n};\n\nDokumentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DokumentComponent,\n  selectors: [[\"app-dokument\"]],\n  decls: 14,\n  vars: 6,\n  consts: [[1, \"row\"], [1, \"col-8\"], [1, \"btn\", \"btn-default\", \"p-0\"], [\"type\", \"file\", 3, \"change\"], [1, \"col-4\"], [1, \"btn\", \"btn-success\", \"btn-sm\", 3, \"disabled\", \"click\"], [\"class\", \"progress my-3\", 4, \"ngIf\"], [\"class\", \"alert alert-secondary\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"card\", \"mt-3\"], [1, \"card-header\"], [\"class\", \"list-group list-group-flush\", 4, \"ngFor\", \"ngForOf\"], [1, \"progress\", \"my-3\"], [\"role\", \"progressbar\", \"aria-valuemin\", \"0\", \"aria-valuemax\", \"100\", 1, \"progress-bar\", \"progress-bar-info\", \"progress-bar-striped\", 3, \"ngStyle\"], [\"role\", \"alert\", 1, \"alert\", \"alert-secondary\"], [1, \"list-group\", \"list-group-flush\"], [1, \"list-group-item\"], [3, \"href\"]],\n  template: function DokumentComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"label\", 2)(3, \"input\", 3);\n      i0.ɵɵlistener(\"change\", function DokumentComponent_Template_input_change_3_listener($event) {\n        return ctx.selectFile($event);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(4, \"div\", 4)(5, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function DokumentComponent_Template_button_click_5_listener() {\n        return ctx.upload();\n      });\n      i0.ɵɵtext(6, \" Upload \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(7, DokumentComponent_div_7_Template, 3, 5, \"div\", 6);\n      i0.ɵɵtemplate(8, DokumentComponent_div_8_Template, 2, 1, \"div\", 7);\n      i0.ɵɵelementStart(9, \"div\", 8)(10, \"div\", 9);\n      i0.ɵɵtext(11, \"List of Files\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(12, DokumentComponent_ul_12_Template, 4, 2, \"ul\", 10);\n      i0.ɵɵpipe(13, \"async\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"disabled\", !ctx.selectedFiles);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.currentFile);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.message);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(13, 4, ctx.fileInfos));\n    }\n  },\n  directives: [i2.NgIf, i2.NgStyle, i2.NgForOf],\n  pipes: [i2.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJkb2t1bWVudC5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"sources":["C:/Users/jevti/Desktop/milos-proj/angular/angularFront/src/app/components/dokument/dokument.component.ts"],"names":["HttpEventType","i0","i1","i2","_c0","a0","width","DokumentComponent_div_7_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ctx_r0","ɵɵnextContext","ɵɵadvance","ɵɵproperty","ɵɵpureFunction1","progress","ɵɵattribute","ɵɵtextInterpolate1","DokumentComponent_div_8_Template","ctx_r1","message","DokumentComponent_ul_12_Template","file_r3","$implicit","ɵɵpropertyInterpolate","url","ɵɵsanitizeUrl","ɵɵtextInterpolate","name","DokumentComponent","constructor","fileuploadingService","filenames","fileStatus","status","requestType","percent","ngOnInit","fileInfos","getFiles","selectFile","event","selectedFiles","target","files","onUploadFiles","formData","FormData","file","append","upload","subscribe","console","log","resportProgress","error","httpEvent","type","UploadProgress","updateStatus","loaded","total","DownloadProgress","ResponseHeader","Response","body","Array","filename","unshift","saveAs","File","headers","get","ɵfac","DokumentComponent_Factory","t","ɵɵdirectiveInject","UploadService","ɵcmp","ɵɵdefineComponent","selectors","decls","vars","consts","template","DokumentComponent_Template","ɵɵlistener","DokumentComponent_Template_input_change_3_listener","$event","DokumentComponent_Template_button_click_5_listener","ɵɵtemplate","ɵɵpipe","currentFile","ɵɵpipeBind1","directives","NgIf","NgStyle","NgForOf","pipes","AsyncPipe","styles"],"mappings":"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","sourcesContent":["import { HttpEventType, } from '@angular/common/http';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"./../../services/uploads/upload.service\";\r\nimport * as i2 from \"@angular/common\";\r\nconst _c0 = function (a0) { return { width: a0 }; };\r\nfunction DokumentComponent_div_7_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 12);\r\n    i0.ɵɵtext(2);\r\n    i0.ɵɵelementEnd()();\r\n} if (rf & 2) {\r\n    const ctx_r0 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(3, _c0, ctx_r0.progress + \"%\"));\r\n    i0.ɵɵattribute(\"aria-valuenow\", ctx_r0.progress);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.progress, \"% \");\r\n} }\r\nfunction DokumentComponent_div_8_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 13);\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r1 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.message, \"\\n\");\r\n} }\r\nfunction DokumentComponent_ul_12_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"ul\", 14)(1, \"li\", 15)(2, \"a\", 16);\r\n    i0.ɵɵtext(3);\r\n    i0.ɵɵelementEnd()()();\r\n} if (rf & 2) {\r\n    const file_r3 = ctx.$implicit;\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵpropertyInterpolate(\"href\", file_r3.url, i0.ɵɵsanitizeUrl);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate(file_r3.name);\r\n} }\r\nexport class DokumentComponent {\r\n    constructor(fileuploadingService) {\r\n        this.fileuploadingService = fileuploadingService;\r\n        this.filenames = [];\r\n        this.fileStatus = { status: '', requestType: '', percent: 0 };\r\n    }\r\n    ngOnInit() {\r\n        this.fileInfos = this.fileuploadingService.getFiles();\r\n    }\r\n    selectFile(event) {\r\n        this.selectedFiles = event.target.files;\r\n    }\r\n    onUploadFiles(files) {\r\n        const formData = new FormData();\r\n        for (const file of files) {\r\n            formData.append('files', file, file.name);\r\n        }\r\n        this.fileuploadingService.upload(formData).subscribe((event) => {\r\n            console.log(event);\r\n            this.resportProgress(event);\r\n        }, (error) => {\r\n            console.log(error);\r\n        });\r\n    }\r\n    resportProgress(httpEvent) {\r\n        switch (httpEvent.type) {\r\n            case HttpEventType.UploadProgress:\r\n                this.updateStatus(httpEvent.loaded, httpEvent.total, 'Uploading... ');\r\n                break;\r\n            case HttpEventType.DownloadProgress:\r\n                this.updateStatus(httpEvent.loaded, httpEvent.total, 'Downloading... ');\r\n                break;\r\n            case HttpEventType.ResponseHeader:\r\n                console.log('Header returned', httpEvent);\r\n                break;\r\n            case HttpEventType.Response:\r\n                if (httpEvent.body instanceof Array) {\r\n                    this.fileuploadingService.status = 'done';\r\n                    for (const filename of httpEvent.body) {\r\n                        this.filenames.unshift(filename);\r\n                    }\r\n                }\r\n                else {\r\n                    saveAs(new File([httpEvent.body], httpEvent.headers.get('File-Name'), {\r\n                        type: `${httpEvent.headers.get('Content-Type')};charset=utf-8`,\r\n                    }));\r\n                    // saveAs(new Blob([httpEvent.body!],\r\n                    //   { type: `${httpEvent.headers.get('Content-Type')};charset=utf-8`}),\r\n                    //    httpEvent.headers.get('File-Name'));\r\n                }\r\n                this.fileStatus.status = 'done';\r\n                break;\r\n            default:\r\n                console.log(httpEvent);\r\n                break;\r\n        }\r\n    }\r\n}\r\nDokumentComponent.ɵfac = function DokumentComponent_Factory(t) { return new (t || DokumentComponent)(i0.ɵɵdirectiveInject(i1.UploadService)); };\r\nDokumentComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: DokumentComponent, selectors: [[\"app-dokument\"]], decls: 14, vars: 6, consts: [[1, \"row\"], [1, \"col-8\"], [1, \"btn\", \"btn-default\", \"p-0\"], [\"type\", \"file\", 3, \"change\"], [1, \"col-4\"], [1, \"btn\", \"btn-success\", \"btn-sm\", 3, \"disabled\", \"click\"], [\"class\", \"progress my-3\", 4, \"ngIf\"], [\"class\", \"alert alert-secondary\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"card\", \"mt-3\"], [1, \"card-header\"], [\"class\", \"list-group list-group-flush\", 4, \"ngFor\", \"ngForOf\"], [1, \"progress\", \"my-3\"], [\"role\", \"progressbar\", \"aria-valuemin\", \"0\", \"aria-valuemax\", \"100\", 1, \"progress-bar\", \"progress-bar-info\", \"progress-bar-striped\", 3, \"ngStyle\"], [\"role\", \"alert\", 1, \"alert\", \"alert-secondary\"], [1, \"list-group\", \"list-group-flush\"], [1, \"list-group-item\"], [3, \"href\"]], template: function DokumentComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"label\", 2)(3, \"input\", 3);\r\n        i0.ɵɵlistener(\"change\", function DokumentComponent_Template_input_change_3_listener($event) { return ctx.selectFile($event); });\r\n        i0.ɵɵelementEnd()()();\r\n        i0.ɵɵelementStart(4, \"div\", 4)(5, \"button\", 5);\r\n        i0.ɵɵlistener(\"click\", function DokumentComponent_Template_button_click_5_listener() { return ctx.upload(); });\r\n        i0.ɵɵtext(6, \" Upload \");\r\n        i0.ɵɵelementEnd()()();\r\n        i0.ɵɵtemplate(7, DokumentComponent_div_7_Template, 3, 5, \"div\", 6);\r\n        i0.ɵɵtemplate(8, DokumentComponent_div_8_Template, 2, 1, \"div\", 7);\r\n        i0.ɵɵelementStart(9, \"div\", 8)(10, \"div\", 9);\r\n        i0.ɵɵtext(11, \"List of Files\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(12, DokumentComponent_ul_12_Template, 4, 2, \"ul\", 10);\r\n        i0.ɵɵpipe(13, \"async\");\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(5);\r\n        i0.ɵɵproperty(\"disabled\", !ctx.selectedFiles);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.currentFile);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.message);\r\n        i0.ɵɵadvance(4);\r\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(13, 4, ctx.fileInfos));\r\n    } }, directives: [i2.NgIf, i2.NgStyle, i2.NgForOf], pipes: [i2.AsyncPipe], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJkb2t1bWVudC5jb21wb25lbnQuY3NzIn0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}